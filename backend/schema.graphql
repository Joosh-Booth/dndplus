schema {
  query: RootQuery
  mutation: RootMutation
}

type AuthenticateUserError {
  nonFieldErrors: [String!]!
}

input AuthenticateUserInput {
  username: String!
  password: String!
}

union AuthenticateUserPayload = AuthenticateUserError | AuthenticateUserSuccess

type AuthenticateUserSuccess {
  user: User!
  token: String!
}

type CreateUserError {
  nonFieldErrors: [String!]!
  fieldErrors: [CreateUserInvalidField!]!
}

enum CreateUserFieldName {
  EMAIL
  PASSWORD
  USERNAME
}

input CreateUserInput {
  username: String!
  email: String!
  password: String!
}

type CreateUserInvalidField {
  fieldName: CreateUserFieldName!
  errors: [String!]!
}

union CreateUserPayload = CreateUserError | CreateUserSuccess

type CreateUserSuccess {
  user: User!
}

type IsAuthenticatedError {
  errors: [String!]!
}

input IsAuthenticatedInput {
  token: String!
  id: Int!
}

union IsAuthenticatedPayload = IsAuthenticatedError | IsAuthenticatedSuccess

type IsAuthenticatedSuccess {
  string: String!
}

type RootMutation {
  createUser(input: CreateUserInput!): CreateUserPayload!
  authenticateUser(input: AuthenticateUserInput!): AuthenticateUserPayload!
  isAuthenticated(input: IsAuthenticatedInput!): IsAuthenticatedPayload!
}

type RootQuery {
  userByReference(reference: String!): User
}

type User {
  localId: ID!
  email: String!
  username: String!
  isActive: Boolean!
  isStaff: Boolean!
  reference: String!
}
