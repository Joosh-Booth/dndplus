schema {
  query: RootQuery
  mutation: RootMutation
}

type AuthoriseUserError {
  nonFieldErrors: [String!]!
}

input AuthoriseUserInput {
  username: String!
  password: String!
}

union AuthoriseUserPayload = AuthoriseUserError | AuthoriseUserSuccess

type AuthoriseUserSuccess {
  user: User!
  token: String!
}

type CreateUserError {
  nonFieldErrors: [String!]!
  fieldErrors: [CreateUserInvalidField!]!
}

enum CreateUserFieldName {
  EMAIL
  PASSWORD
  USERNAME
}

input CreateUserInput {
  username: String!
  email: String!
  password: String!
}

type CreateUserInvalidField {
  fieldName: CreateUserFieldName!
  errors: [String!]!
}

union CreateUserPayload = CreateUserError | CreateUserSuccess

type CreateUserSuccess {
  user: User!
}

type RootMutation {
  createUser(input: CreateUserInput!): CreateUserPayload!
  authoriseUser(input: AuthoriseUserInput!): AuthoriseUserPayload!
}

type RootQuery {
  userByReference(reference: String!): User
}

type User {
  localId: ID!
  email: String!
  username: String!
  isActive: Boolean!
  isStaff: Boolean!
  reference: String!
}
